(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{212:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"pagination-分页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pagination-分页","aria-hidden":"true"}},[t._v("#")]),t._v(" Pagination 分页")]),t._v(" "),s("p",[t._v("分页是一个很常见的需求，不过每个人的实现习惯都不太一样，而且总会遗漏一些边界逻辑。这里封装了一个 "),s("code",[t._v("mixin")]),t._v(" 来帮助我们处理通用逻辑。具体可见 "),s("code",[t._v("src/global/mixins/page/page.js")]),t._v("。在此 "),s("code",[t._v("mixin")]),t._v(" 上面，又扩展了一个和体验相关的常用需求，具体可见 "),s("code",[t._v("src/global/mixins/page/page.router.js")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#page","aria-hidden":"true"}},[t._v("#")]),t._v(" page")]),t._v(" "),s("ul",[s("li",[t._v("需要定义 "),s("code",[t._v("loadList")]),t._v(" 方法，返回值需要是 "),s("code",[t._v("promise")]),t._v(" 或者 "),s("code",[t._v("true")]),t._v("（"),s("code",[t._v("true")]),t._v(" 代表延迟调用 "),s("code",[t._v("loadList")]),t._v("，调用时机需用户自行把握），同时需要在请求结束后对 "),s("code",[t._v("list")]),t._v("、"),s("code",[t._v("total")]),t._v(" 等赋值。同时对列表接口 "),s("code",[t._v("loadList")]),t._v(" 方法进行了增强，可获取状态 "),s("code",[t._v("loading")]),t._v(" 、"),s("code",[t._v("loadError")]),t._v("、"),s("code",[t._v("loadDone")]),t._v("。")]),t._v(" "),s("li",[t._v("可以通过 "),s("code",[t._v("lessQuota")]),t._v(" 获取配额是否有剩余（默认是 "),s("code",[t._v("true")]),t._v("，在有数据的情况下会返回实际剩余配额），需要定义 "),s("code",[t._v("loadQuota")]),t._v(" 方法（可选）主要是获取配额，同时需要对 "),s("code",[t._v("quota")]),t._v(" 赋值。")]),t._v(" "),s("li",[t._v("分页控件事件响应 "),s("code",[t._v("changePage")]),t._v("，提供 "),s("code",[t._v("totalPage")]),t._v("、"),s("code",[t._v("page")]),t._v(" 取值")]),t._v(" "),s("li",[t._v("提供修改每页条数的方法 "),s("code",[t._v("changeLimit")])]),t._v(" "),s("li",[t._v("提供了获取调用远程接口参数的方法。 "),s("code",[t._v("getOffset")]),t._v("（用于接口发送 "),s("code",[t._v("offset")]),t._v("、"),s("code",[t._v("limit")]),t._v("），"),s("code",[t._v("getPage")]),t._v("（用于接口发送 "),s("code",[t._v("pageNum")]),t._v("、"),s("code",[t._v("pageSize")]),t._v("）")]),t._v(" "),s("li",[t._v("提供安全删除实例的方法，用于最后一页只有一条的情况，同时会自动在待删除实例上添加 "),s("code",[t._v("deleting")]),t._v(" 属性，需要定义 "),s("code",[t._v("deleteItem")]),t._v(" 方法，返回值需要是 "),s("code",[t._v("promise")]),t._v(" 或者 "),s("code",[t._v("true")]),t._v("（"),s("code",[t._v("true")]),t._v(" 代表延迟调用）")]),t._v(" "),s("li",[t._v("提供前端分页模式 "),s("code",[t._v("localPage")]),t._v("，默认 "),s("code",[t._v("false")]),t._v("，需要在请求结束后对 "),s("code",[t._v("originList")]),t._v(" 赋值，如需刷新，调用 "),s("code",[t._v("refresh")]),t._v(" 即可")])]),t._v(" "),s("h2",{attrs:{id:"page-router"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#page-router","aria-hidden":"true"}},[t._v("#")]),t._v(" page.router")]),t._v(" "),s("p",[t._v("提供了 "),s("code",[t._v("page")]),t._v(" 的所有能力，并且在体验方面进行了增强。仅仅需要在路由上配置 "),s("code",[t._v("name")]),t._v(" 属性")]),t._v(" "),s("ul",[s("li",[t._v("当页码、每页条数改变时，体现在浏览器地址栏上")]),t._v(" "),s("li",[t._v("当每页条数改变时，会自动在 "),s("code",[t._v("localStorage")]),t._v(" 存入相关配置，下次自动选中用户选择的条数")])]),t._v(" "),s("h3",{attrs:{id:"体验优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#体验优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 体验优化")]),t._v(" "),s("p",[t._v("试想一个场景，用户在第 20 页找到一个实例，点击查看详情，查看完毕，用户点击返回，肯定是期望回到第 20 页，这样就需要我们把页码信息一直在路由之间保留，但很多时候都未实现此逻辑。而本项目提供了一种较为简单的方法来实现此需求。使用起来非常简单，具体可见 "),s("code",[t._v("src/views/dashboard/demo/views/router/routes.js")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在需要共享路由参数的共同上级路由声明如下信息：")]),t._v("\nmeta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    locks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        include"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/router/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在某些路由下生效")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exclude: [], // 排除某些路由")]),t._v("\n        params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'search'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo.router.list.page'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 共享 'search', 'demo.router.list.page' 参数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("用户如果在 "),s("code",[t._v("router/")]),t._v(" 路由下面的子页面进行操作，无论写代码的时候，是否去声明 "),s("code",[t._v("search")]),t._v("、"),s("code",[t._v("demo.router.list.page")]),t._v("，只要对其在某个路由赋值，那么其他相关页面都会自动带上相关信息。")]),t._v(" "),s("p",[t._v("采用此方法之前，在相关子页面都需要进行如下声明：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("others"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo.router.list.page'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo.router.list.page'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("采用此方法之后，这些体验性的配置，不需要每次都加了。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("others"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("对于用户右键点击新页面打开，这些参数是无法带过去的。对于关键属性，如：id 等，不建议使用。")])]),t._v(" "),s("h2",{attrs:{id:"online"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#online","aria-hidden":"true"}},[t._v("#")]),t._v(" online")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://vusion-templates.github.io/cloud-admin/#/demo/router/list",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);